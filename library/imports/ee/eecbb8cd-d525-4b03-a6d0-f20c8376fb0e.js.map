{"version":3,"sources":["assets\\scripts\\GameManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Player from \"./Player\"\r\nimport UI from \"./UI\"\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameManager extends cc.Component {\r\n\r\n    @property(Player)\r\n    player1: Player = null;\r\n\r\n    @property(Player)\r\n    player2: Player = null;\r\n\r\n    @property(Player)\r\n    player3: Player = null;\r\n\r\n    @property(Player)\r\n    player4: Player = null;\r\n\r\n    @property(UI)\r\n    UI: UI = null;\r\n\r\n    @property(cc.Node)\r\n    camera: cc.Node = null;\r\n\r\n    @property(cc.AudioClip)\r\n    bgm1: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    bgm2: cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    background: cc.Node = null\r\n\r\n    @property(cc.SpriteFrame)\r\n    private weaponSprite0: cc.SpriteFrame = null;\r\n    \r\n    @property(cc.SpriteFrame)\r\n    private weaponSprite1: cc.SpriteFrame = null;\r\n    \r\n    @property(cc.SpriteFrame)\r\n    private weaponSprite2: cc.SpriteFrame = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    private weaponSprite3: cc.SpriteFrame = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    private weaponSprite4: cc.SpriteFrame = null;\r\n\r\n    @property()\r\n    cameraSpeed: number = 300;\r\n\r\n    private player = null;\r\n\r\n    private aKeyDown: boolean = false;\r\n\r\n    private dKeyDown: boolean = false;\r\n\r\n    private shoot: boolean = false;\r\n\r\n    private currPlayer: number;\r\n\r\n    private totalPlayer: number = 2;\r\n\r\n    private alivePlayer = null;\r\n\r\n    private shootAngle = null;\r\n\r\n    private playerNum = null;\r\n\r\n    // private currPlayerPos = null;\r\n\r\n    private isPaused: boolean = false;\r\n\r\n    private playerPath: string = \"Canvas/Players/\";\r\n\r\n    private winner;\r\n\r\n    private cameraAnchor: number = 0;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -980);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.playerNum = cc.sys.localStorage.getItem(\"PlayerNum\");\r\n        // this.alivePlayer = this.totalPlayer;\r\n        this.alivePlayer = parseInt(this.playerNum);\r\n    }\r\n    \r\n    start () {\r\n        cc.audioEngine.stopMusic();\r\n        this.playBGM();\r\n        this.loadPlayer();\r\n        this.changePlayer(0);\r\n        this.initPauseMenuButtons();\r\n        this.initSettingsMenuButtons();\r\n    }\r\n\r\n    update (dt) {\r\n        \r\n        var playerPos = this.player.node.getPosition();\r\n        var cameraPos = this.camera.getPosition();\r\n        var prevCamPos = this.camera.getPosition();\r\n        if(this.cameraAnchor == 1 || this.cameraAnchor == -1){\r\n            cameraPos.x += this.cameraAnchor * this.cameraSpeed * dt;\r\n            // console.log(this.cameraAnchor, \"update\");\r\n        } else{\r\n            cameraPos.lerp(playerPos, 0.1, cameraPos);\r\n            cameraPos.y = cc.misc.clampf(playerPos.y, 0, 200);\r\n        }\r\n        if(cameraPos.y > 100){\r\n            cameraPos.y = 100;\r\n        }\r\n        if(cameraPos.x < -35) {\r\n            cameraPos.x = -35;\r\n        } else if(cameraPos.x > 2033+35) {\r\n            cameraPos.x = 2033+35;\r\n        }\r\n        this.camera.setPosition(cameraPos);\r\n        // if(this.background){\r\n        //     this.background.setPosition(cameraPos.x < prevCamPos.x ? \r\n        //         ((cameraPos.x - prevCamPos.x)/3 + this.background.x) : \r\n        //         (this.background.x - (prevCamPos.x - cameraPos.x)/3), \r\n        //         cameraPos.y < prevCamPos.y ? \r\n        //         ((cameraPos.y - prevCamPos.y)/3 + this.background.y) :\r\n        //         (this.background.y - (prevCamPos.y - cameraPos.y)/3));\r\n        // }\r\n        this.updateWeaponUi();\r\n        if(this.winner == null){\r\n            if(this.UI.timerVal < 0 || this.player.isDie){\r\n                this.UI.timerVal = 20;\r\n                this.changePlayer(this.currPlayer + 1);\r\n            }\r\n            // this.isWin();\r\n        }\r\n    }\r\n\r\n    loadPlayer() {\r\n        this.totalPlayer = parseInt(this.playerNum);\r\n        switch (this.totalPlayer) {\r\n            case 4:\r\n                cc.find(this.playerPath + \"Player 4\").active = true;\r\n            case 3:\r\n                cc.find(this.playerPath + \"Player 3\").active = true;\r\n            case 2:\r\n                cc.find(this.playerPath + \"Player 2\").active = true;\r\n                cc.find(this.playerPath + \"Player 1\").active = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    isWin(){\r\n        let alive = this.totalPlayer;\r\n        if (this.totalPlayer == 2){\r\n            if(this.player1.isDie)\r\n                alive--;\r\n            if(this.player2.isDie)\r\n                alive--;\r\n        }\r\n        else if (this.totalPlayer == 3){\r\n            if(this.player1.isDie)\r\n                alive--;\r\n            if(this.player2.isDie)\r\n                alive--;\r\n            if(this.player3.isDie)\r\n                alive--;\r\n        }\r\n        else if (this.totalPlayer == 4){\r\n            if(this.player1.isDie)\r\n                alive--;\r\n            if(this.player2.isDie)\r\n                alive--;\r\n            if(this.player3.isDie)\r\n                alive--;\r\n            if(this.player4.isDie)\r\n                alive--;\r\n        }\r\n        // this.alivePlayer = alive;\r\n        if (this.alivePlayer == 1){\r\n            this.winner = this.player.playerName.getComponent(cc.Label).string;\r\n            console.log(this.winner);\r\n            //this.UI.pause();\r\n        }\r\n    }\r\n\r\n    changePlayer(num) {\r\n        this.currPlayer = num % this.totalPlayer;\r\n        if((this.player && !this.player.isDie)) {\r\n            this.player.setPlayerMoveDirection(0);\r\n            this.player.setPlayerJump(false);\r\n            this.player.line.getComponent(\"TrajectoryLine\").clearLine();\r\n            this.onDisable();\r\n        } \r\n        switch (this.currPlayer) {\r\n            case 0:\r\n                this.player = this.player1;\r\n                break;\r\n            case 1:\r\n                this.player = this.player2;\r\n                break;\r\n            case 2:\r\n                this.player = this.player3;\r\n                break;\r\n            case 3:\r\n                this.player = this.player4;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if(!this.player.isDie) {\r\n            this.onEnable();\r\n            this.changePlayerUi();\r\n        } else {\r\n            // console.log(this.currPlayer, \"change\");\r\n            this.changePlayer(num+1);\r\n        }\r\n    }\r\n\r\n    playBGM() {\r\n        let sceneName = cc.director.getScene().name;\r\n        if(sceneName == \"map1\")\r\n            cc.audioEngine.playMusic(this.bgm1, true);\r\n        else if(sceneName == \"map2\")\r\n            cc.audioEngine.playMusic(this.bgm2, true);\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        if(this.player) {\r\n            this.player.node.on(cc.Node.EventType.TOUCH_START, this.onEventStart, this);    // touched\r\n            this.player.node.on(cc.Node.EventType.TOUCH_MOVE, this.onEventMove, this);      // aim\r\n            this.player.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onEventCancel, this);  // shoot\r\n            this.player.node.on(cc.Node.EventType.TOUCH_END, this.onEventEnd, this);        // cancel shoot\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        if(this.player) {\r\n            this.player.node.off(cc.Node.EventType.TOUCH_START, this.onEventStart, this);   // touched\r\n            this.player.node.off(cc.Node.EventType.TOUCH_MOVE, this.onEventMove, this);     // aim\r\n            this.player.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onEventCancel, this); // shoot\r\n            this.player.node.on(cc.Node.EventType.TOUCH_END, this.onEventEnd, this);        // cancel shoot\r\n        }\r\n    }\r\n\r\n    onKeyDown(e) {\r\n        switch (e.keyCode) {\r\n            case cc.macro.KEY.a:        // move left\r\n                this.aKeyDown = true;\r\n                this.player.setPlayerMoveDirection(-1);\r\n                break;\r\n            case cc.macro.KEY.d:        // move right\r\n                this.dKeyDown = true;\r\n                this.player.setPlayerMoveDirection(1);\r\n                break;\r\n            case cc.macro.KEY.space:    // jump\r\n                this.player.setPlayerJump(true);\r\n                break;\r\n            case cc.macro.KEY.escape:\r\n                this.pauseGame();\r\n                //this.UI.pause();\r\n                break;\r\n            case cc.macro.KEY.p:        // pass\r\n                this.changePlayer(this.currPlayer + 1);\r\n                this.UI.timerVal = 20;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(e) {\r\n        switch (e.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.aKeyDown = false;\r\n                if(this.dKeyDown) {\r\n                    this.player.setPlayerMoveDirection(1);  // move right\r\n                } else {\r\n                    this.player.setPlayerMoveDirection(0);  // stop moving\r\n                }\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.dKeyDown = false;\r\n                if(this.aKeyDown) {\r\n                    this.player.setPlayerMoveDirection(-1); // move left\r\n                } else {\r\n                    this.player.setPlayerMoveDirection(0);  // stop moving\r\n                }\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.player.setPlayerJump(false);\r\n                break;\r\n            case cc.macro.KEY.f:        // shoot (bullet)    \r\n                this.player.weapon = \"gun\";\r\n                break;\r\n            case cc.macro.KEY.r:        // bomb\r\n                this.player.weapon = \"bomb\"\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onEventStart (event) {  // touched\r\n        if (!this.enabledInHierarchy) return;\r\n\r\n        if(!this.shoot) {\r\n            // this.startPos = this.node.position;\r\n            // this.motorJoint.enabled = false;\r\n            // this.rb.gravityScale = 0;\r\n            // this.rb.linearVelocity = cc.Vec2.ZERO;\r\n            // this.rb.angularVelocity = 0;\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    \r\n    onEventMove (event) {   // aim\r\n        if (!this.enabledInHierarchy) return;\r\n\r\n        var playerPos = event.getStartLocation();\r\n        var mousePos = event.getLocation();\r\n        var diffX = mousePos.x - playerPos.x;\r\n        var diffY = playerPos.y - mousePos.y;\r\n        this.shootAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)); // angle in radian\r\n        if(diffX >= 0) {    // change player direction\r\n            this.player.setPlayerChangeDirection(-1);\r\n        } else {\r\n            this.player.setPlayerChangeDirection(1);\r\n        }\r\n        if(diffY < 0) {\r\n            this.shootAngle *= -1;\r\n        }\r\n        if(!this.shoot){\r\n            this.player.aim = true;\r\n            if(this.player.weapon == \"gun\") {\r\n                if(this.player.gunType == \"normal\") {\r\n                    this.player.line.getComponent(\"TrajectoryLine\").drawStraightLine(this.shootAngle, 300); // draw trajectory line\r\n                } else if(this.player.gunType == \"burst\") {\r\n                    this.player.line.getComponent(\"TrajectoryLine\").drawStraightLine(this.shootAngle, 200); // draw trajectory line\r\n                } else if(this.player.gunType == \"sniper\") {\r\n                    this.player.line.getComponent(\"TrajectoryLine\").drawStraightLine(this.shootAngle, 400); // draw trajectory line\r\n                } else if(this.player.gunType == \"shotgun\") {\r\n                    this.player.line.getComponent(\"TrajectoryLine\").drawCircle(this.shootAngle); // draw trajectory line\r\n                }\r\n            } else if(this.player.weapon == \"bomb\") {\r\n                let power = (Math.abs(diffY) >= Math.abs(diffX) ? Math.abs(diffY) : Math.abs(diffX)) \r\n                this.player.line.getComponent(\"TrajectoryLine\").drawCurveLine(this.shootAngle, power*2); // draw arrow\r\n                this.player.power = (power * 2 > 100) ? 100 : power * 2;\r\n            }\r\n        }\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    onEventCancel (event) { // shoot\r\n        if (!this.enabledInHierarchy) return;\r\n\r\n        this.haveShot();\r\n    \r\n        event.stopPropagation();\r\n    }\r\n    \r\n    onEventEnd (event) {  // cancel shoot\r\n        if (!this.enabledInHierarchy) return;\r\n    \r\n        this.haveShot();\r\n    \r\n        event.stopPropagation();\r\n    }\r\n\r\n    haveShot() {\r\n        if(this.shoot) return;\r\n        this.player.line.getComponent(\"TrajectoryLine\").clearLine();\r\n        // this.shoot = true;\r\n        if(this.player.weapon == \"gun\") {\r\n            this.player.setPlayerShoot(this.shootAngle);\r\n        } else if (this.player.weapon == \"bomb\") {\r\n            this.player.setPlayerBomb(this.shootAngle);\r\n        }\r\n        this.player.setPlayerChangeDirection(0);\r\n    }\r\n\r\n    pauseGame() {\r\n        if(cc.director.isPaused()) {\r\n            cc.director.resume();\r\n            cc.find(\"Canvas/Main Camera/Pause Menu\").active = false;\r\n        }\r\n        else {\r\n            cc.director.pause();\r\n            cc.find(\"Canvas/Main Camera/Pause Menu\").active = true;\r\n        }\r\n    }\r\n\r\n    // Pause Menu Buttons\r\n\r\n    initPauseMenuButtons() {\r\n        let resume_clickEventHandler = new cc.Component.EventHandler();\r\n        resume_clickEventHandler.target = this.node;\r\n        resume_clickEventHandler.component = \"GameManager\";\r\n        resume_clickEventHandler.handler = \"resume\";\r\n        cc.find(\"Canvas/Main Camera/Pause Menu/Big Layout/resumeBtn\").getComponent(cc.Button).clickEvents.push(resume_clickEventHandler);\r\n\r\n        let restart_clickEventHandler = new cc.Component.EventHandler();\r\n        restart_clickEventHandler.target = this.node;\r\n        restart_clickEventHandler.component = \"GameManager\";\r\n        restart_clickEventHandler.handler = \"restart\";\r\n        cc.find(\"Canvas/Main Camera/Pause Menu/Big Layout/restartBtn\").getComponent(cc.Button).clickEvents.push(restart_clickEventHandler);\r\n\r\n        let settings_clickEventHandler = new cc.Component.EventHandler();\r\n        settings_clickEventHandler.target = this.node;\r\n        settings_clickEventHandler.component = \"GameManager\";\r\n        settings_clickEventHandler.handler = \"settings\";\r\n        cc.find(\"Canvas/Main Camera/Pause Menu/Big Layout/settingsBtn\").getComponent(cc.Button).clickEvents.push(settings_clickEventHandler);\r\n\r\n        let exit_clickEventHandler = new cc.Component.EventHandler();\r\n        exit_clickEventHandler.target = this.node;\r\n        exit_clickEventHandler.component = \"GameManager\";\r\n        exit_clickEventHandler.handler = \"exit\";\r\n        cc.find(\"Canvas/Main Camera/Pause Menu/Big Layout/exitBtn\").getComponent(cc.Button).clickEvents.push(exit_clickEventHandler);\r\n    }\r\n\r\n    resume() {\r\n        cc.director.resume();\r\n        cc.find(\"Canvas/Main Camera/Pause Menu\").active = false;\r\n    }\r\n\r\n    restart() {\r\n        cc.director.resume();\r\n        let sceneName = cc.director.getScene().name;\r\n        cc.director.loadScene(\"loading\", ()=>{\r\n            cc.director.loadScene(sceneName);\r\n        });\r\n    }\r\n\r\n    settings() {\r\n        cc.find(\"Canvas/Main Camera/Settings Menu\").active = true;\r\n    }\r\n\r\n    exit() {\r\n        //\r\n    }\r\n\r\n    // Settings Menu Buttons\r\n\r\n    initSettingsMenuButtons() {\r\n        let close_clickEventHandler = new cc.Component.EventHandler();\r\n        close_clickEventHandler.target = this.node;\r\n        close_clickEventHandler.component = \"GameManager\";\r\n        close_clickEventHandler.handler = \"close\";\r\n        cc.find(\"Canvas/Main Camera/Settings Menu/closeBtn\").getComponent(cc.Button).clickEvents.push(close_clickEventHandler);\r\n\r\n        let bgmute_clickEventHandler = new cc.Component.EventHandler();\r\n        bgmute_clickEventHandler.target = this.node;\r\n        bgmute_clickEventHandler.component = \"GameManager\";\r\n        bgmute_clickEventHandler.handler = \"bgMute\";\r\n        cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/BG Mute/bgMuteBtn\").getComponent(cc.Button).clickEvents.push(bgmute_clickEventHandler);\r\n\r\n        let sfxmute_clickEventHandler = new cc.Component.EventHandler();\r\n        sfxmute_clickEventHandler.target = this.node;\r\n        sfxmute_clickEventHandler.component = \"GameManager\";\r\n        sfxmute_clickEventHandler.handler = \"sfxMute\";\r\n        cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/SFX Mute/sfxMuteBtn\").getComponent(cc.Button).clickEvents.push(sfxmute_clickEventHandler);\r\n    \r\n        let bg_sliderEventHandler = new cc.Component.EventHandler();\r\n        bg_sliderEventHandler.target = this.node;\r\n        bg_sliderEventHandler.component = \"GameManager\";\r\n        bg_sliderEventHandler.handler = \"changeBgVol\";\r\n        cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/BG Volume/bgSlider\").getComponent(cc.Slider).slideEvents.push(bg_sliderEventHandler);\r\n\r\n        let sfx_sliderEventHandler = new cc.Component.EventHandler();\r\n        sfx_sliderEventHandler.target = this.node;\r\n        sfx_sliderEventHandler.component = \"GameManager\";\r\n        sfx_sliderEventHandler.handler = \"changeSfxVol\";\r\n        cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/SFX Volume/sfxSlider\").getComponent(cc.Slider).slideEvents.push(sfx_sliderEventHandler);\r\n    }\r\n\r\n    close() {\r\n        cc.find(\"Canvas/Main Camera/Settings Menu\").active = false;\r\n    }\r\n\r\n    bgMute() {\r\n        cc.audioEngine.setMusicVolume(0);\r\n    }\r\n\r\n    sfxMute() {\r\n        cc.audioEngine.setEffectsVolume(0);\r\n    }\r\n\r\n    changeBgVol() {\r\n        let value = cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/BG Volume/bgSlider\").getComponent(cc.Slider).progress;\r\n        cc.audioEngine.setMusicVolume(value);\r\n    }\r\n\r\n    changeSfxVol() {\r\n        let value = cc.find(\"Canvas/Main Camera/Settings Menu/Big Layout/SFX Volume/sfxSlider\").getComponent(cc.Slider).progress;\r\n        cc.audioEngine.setEffectsVolume(value);\r\n    }\r\n\r\n    setCameraAnchor(value){\r\n        this.cameraAnchor = value;\r\n        \r\n    }\r\n    getWin(){\r\n        return (this.winner != null);\r\n    }\r\n\r\n    updateWeaponUi(){\r\n        // var weaponSprite = cc.find(\"Canvas/Main Camera/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame;\r\n        if(this.player){\r\n            switch (this.player.getCurrWeaponNum()){\r\n                case \"0\":\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite0;\r\n                    // console.log(weaponSprite, \"updateweaponUi\");\r\n                    break;\r\n                case \"1\":\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite1;\r\n                    break;\r\n                case \"2\":\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite2;\r\n                    break;\r\n                case \"3\":\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite3;\r\n                    break;\r\n                case \"4\":\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite4;\r\n                    break;\r\n                default:\r\n                    cc.find(\"Canvas/Main Camera/UI/WeaponUi\").getChildByName(\"Sprite\").getComponent(cc.Sprite).spriteFrame = this.weaponSprite3;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    playerDie(){\r\n        this.alivePlayer -= 1;\r\n        if (this.alivePlayer == 1){\r\n            this.UI.timerVal = 20;\r\n            this.winner = this.player.playerName.getComponent(cc.Label).string;\r\n            // console.log(this.winner);\r\n            // console.log(this.player.isDie, \"die\");\r\n            this.changePlayer(this.currPlayer + 1);\r\n            //this.UI.pause();\r\n        }\r\n    }\r\n\r\n    changePlayerUi(){\r\n        cc.find(\"Canvas/Main Camera/UI/Profile/name\").getComponent(cc.Label).string = this.player.playerName.getComponent(cc.Label).string;\r\n\r\n        switch(this.player.playerChar){\r\n            case \"char1\":\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face0\").active = true;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face1\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face2\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face3\").active = false;\r\n                break;\r\n            case \"char2\":\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face0\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face1\").active = true;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face2\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face3\").active = false;\r\n                break;\r\n            case \"char3\":\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face0\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face1\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face2\").active = true;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face3\").active = false;\r\n                break;\r\n            case \"char4\":\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face0\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face1\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face2\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face3\").active = true;\r\n                break;\r\n            default:\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face0\").active = true;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face1\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face2\").active = false;\r\n                cc.find(\"Canvas/Main Camera/UI/Profile/face3\").active = false;\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}