{"version":3,"sources":["assets\\scripts\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n\r\n    @property(cc.AudioClip)\r\n    jumpAudio: cc.AudioClip = null;\r\n\r\n    @property(cc.AudioClip)\r\n    dieAudio: cc.AudioClip = null;\r\n\r\n    @property(cc.Prefab)\r\n    private bulletPrefab: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    private bombPrefab: cc.Prefab = null;\r\n\r\n    public line = null;\r\n\r\n    private playerName = null;\r\n\r\n    private moveSpeed: number = 300;\r\n\r\n    private moveDirection: number = 0;\r\n\r\n    private changeDirection: number = 0;\r\n\r\n    private jumpVelocity: number = 2500;\r\n\r\n    private jump: boolean = false;\r\n\r\n    private isOnGround: boolean = false;\r\n\r\n    private isDie: boolean = false;\r\n\r\n    private isMove: boolean = false;\r\n\r\n    private animation: cc.Animation = null;\r\n\r\n    private animationState = null;\r\n\r\n    private rigidBody: cc.RigidBody = null;\r\n\r\n    private win: boolean = false;\r\n\r\n    private shoot: boolean = false;\r\n\r\n    private bombPool = null;\r\n\r\n    private bomb: boolean = false;\r\n\r\n    private angle = null;\r\n\r\n    private maxHP: number = 100;\r\n\r\n    private HP: number = 100;\r\n\r\n    private hurt: boolean = false;\r\n\r\n    public weapon: string = \"gun\";\r\n\r\n    public gunType: string = \"shotgun\";\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.animation = this.node.getComponent(cc.Animation);\r\n        this.rigidBody = this.node.getComponent(cc.RigidBody);\r\n        this.playerName = this.node.getChildByName(\"Player Name\");\r\n        this.line = this.node.getChildByName(\"Trajectory Line\");\r\n        this.bombPool = new cc.NodePool('Bomb');\r\n        let maxBombNum = 5;\r\n        for(let i: number = 0; i < maxBombNum; i++) {\r\n            let bomb = cc.instantiate(this.bombPrefab);\r\n\r\n            this.bombPool.put(bomb);\r\n        }\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        if(!this.win) {\r\n            if(!this.isDie) {\r\n                cc.find(\"Player Health/bar\", this.node).width = (this.HP / this.maxHP) * 100;\r\n                this.playerMove(dt);\r\n                if(this.HP <= 0){\r\n                    this.playerDie();\r\n                } else {\r\n                    if(this.jump) {\r\n                        this.playerJump();\r\n                    }\r\n                    if(this.shoot) {\r\n                        this.createBullet(this.gunType);\r\n                    } else if(this.bomb) {\r\n                        this.createBomb();\r\n                    }\r\n                    this.playerAnimation();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if(contact.getWorldManifold().normal.y < 0) { // step on something\r\n            this.isOnGround = true;\r\n        }\r\n        // if(other.tag == 1){     // on ground or props\r\n        //     this.isOnGround = true;\r\n        // }\r\n        if(other.node.group == \"bullet\" || other.node.group == \"explosiveObj\") {\r\n            if(!this.isDie) {\r\n                this.HP -= 10;\r\n                if(this.HP <= 0) {\r\n                    this.HP = 0;\r\n                } else {\r\n                    this.hurt = true;\r\n                    if (this.node.name == 'Player 1' && this.HP != 0){\r\n                        this.animationState = this.animation.play('char1hurt');\r\n                        // this.scheduleOnce(function(){\r\n                        //     this.animationState = this.animation.play('char1idle');\r\n                        // }, 0.5);\r\n                    }\r\n                    else if (this.node.name == 'Player 2' && this.HP != 0){\r\n                        this.animationState = this.animation.play('char2hurt');\r\n                        // this.scheduleOnce(function(){\r\n                        //     this.animationState = this.animation.play('char2idle');\r\n                        // }, 0.5);\r\n                    }\r\n                    else if (this.node.name == 'Player 3' && this.HP != 0){\r\n                        this.animationState = this.animation.play('char3hurt');\r\n                        // this.scheduleOnce(function(){\r\n                        //     this.animationState = this.animation.play('char3idle');\r\n                        // }, 0.5);\r\n                    }\r\n                    else if (this.node.name == 'Player 4' && this.HP != 0){\r\n                        this.animationState = this.animation.play('char4hurt');\r\n                        // this.scheduleOnce(function(){\r\n                        //     this.animationState = this.animation.play('char3idle');\r\n                        // }, 0.5);\r\n                    }\r\n                    this.scheduleOnce(()=>{\r\n                        this.hurt = false;\r\n                    }, 0.5)\r\n                }\r\n            }\r\n        } else if(other.node.group == \"wall\") {\r\n            if(other.node.name == \"Die Boundary\") {\r\n                this.playerDie();\r\n            }\r\n        }\r\n    }\r\n\r\n    playerMove(dt) {\r\n        this.node.x += this.moveSpeed * this.moveDirection * dt;    // player walking\r\n        this.isMove = (this.moveDirection != 0) ? true : false;\r\n        if(this.moveDirection == 1 || this.changeDirection == 1) {   // change direction using scaling\r\n            this.node.scaleX = 1;\r\n            this.playerName.scaleX = 1;\r\n            cc.find(\"Player Health\", this.node).scaleX = 1;\r\n        } else if(this.moveDirection == -1 || this.changeDirection == -1) {\r\n            this.node.scaleX = -1;\r\n            this.playerName.scaleX = -1;\r\n            cc.find(\"Player Health\", this.node).scaleX = -1;\r\n        }\r\n    }\r\n\r\n    playerJump() {\r\n        if(this.isOnGround) {  // player is on ground\r\n            this.rigidBody.linearVelocity = cc.v2(0, this.jumpVelocity);    // add jump velocity\r\n            this.isOnGround = false;\r\n            cc.audioEngine.playEffect(this.jumpAudio, false);\r\n            this.animationState = this.animation.play('char1jump');\r\n        }\r\n    }\r\n\r\n    private createBullet(mode: string)\r\n    {\r\n        this.shoot = false;\r\n        if(mode == \"normal\") {\r\n            let bullet = cc.instantiate(this.bulletPrefab);\r\n            if(bullet != null) {\r\n                bullet.getComponent('Bullet').setAngle(this.angle);\r\n                bullet.getComponent('Bullet').init(this.node);\r\n            }\r\n        }\r\n        else if(mode == \"burst\") {\r\n            this.schedule(function() {\r\n                console.log(\"boom\");\r\n                let bullet = cc.instantiate(this.bulletPrefab);\r\n                if(bullet != null) {\r\n                    bullet.getComponent('Bullet').setAngle(this.angle);\r\n                    bullet.getComponent('Bullet').init(this.node);\r\n                }\r\n            }, 0.05, 2);\r\n        }\r\n        else if(mode == \"shotgun\") {\r\n            let d_angle = -0.2;\r\n            for(let i = 0; i < 5; i++) {\r\n                let bullet = cc.instantiate(this.bulletPrefab);\r\n                if(bullet != null) {\r\n                    bullet.getComponent('Bullet').setAngle(this.angle + d_angle);\r\n                    bullet.getComponent('Bullet').init(this.node);\r\n                    d_angle += 0.1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private createBomb()\r\n    {\r\n        this.bomb = false;\r\n        let bomb = null;\r\n        if (this.bombPool.size() > 0) \r\n            bomb = this.bombPool.get(this.bombPool);\r\n\r\n        if(bomb != null) {\r\n            bomb.getComponent('Bomb').setAngle(this.angle);\r\n            bomb.getComponent('Bomb').init(this.node);\r\n        }\r\n    }\r\n\r\n    playerDie() {\r\n        this.isDie = true;\r\n        if (this.node.name == 'Player 1'){\r\n            this.animation.stop('char1idle');\r\n            this.animationState = this.animation.play('char1dead');\r\n        }\r\n        else if (this.node.name == 'Player 2'){\r\n            this.animation.stop('char2idle');\r\n            this.animationState = this.animation.play('char2dead');\r\n        }\r\n        else if (this.node.name == 'Player 3'){\r\n            this.animation.stop('char3idle');\r\n            this.animationState = this.animation.play('char3dead');\r\n        }\r\n        else if (this.node.name == 'Player 4'){\r\n            this.animation.stop('char4idle');\r\n            this.animationState = this.animation.play('char4dead');\r\n        }\r\n        this.scheduleOnce(function(){\r\n            this.node.destroy();\r\n            // this.node.getComponent(cc.PhysicsBoxCollider).enabled = false;\r\n        }, 1);\r\n        cc.audioEngine.playEffect(this.dieAudio, false);\r\n    }\r\n\r\n    playerAnimation() {\r\n        if(!this.isDie){    // animation for char1\r\n            if(this.node.name == \"Player 1\") {  // MUST change to curPlayer == \"Player 1\"\r\n                if(this.isOnGround && !this.isMove && !this.hurt && (!this.animationState || this.animationState.name != \"char1idle\")) {\r\n                    this.animationState = this.animation.play(\"char1idle\");\r\n                } else if(this.isOnGround && this.isMove && (!this.animationState || this.animationState.name != \"char1run\")) {\r\n                    this.animationState = this.animation.play(\"char1run\");\r\n                } else if(!this.isOnGround && (!this.animationState || this.animationState.name != \"char1jump\")) {\r\n                    this.animationState = this.animation.play(\"char1jump\");\r\n                }\r\n                // if (this.isOnGround && this.animation.getAnimationState('char1jump').isPlaying){\r\n                //     this.animation.stop('char1jump');\r\n                //     this.animationState = this.animation.play('char1idle');\r\n                // }\r\n                // if (this.isMove && !this.animation.getAnimationState('char1run').isPlaying && !this.animation.getAnimationState('char1jump').isPlaying){\r\n                //     this.animationState = this.animation.play('char1run');\r\n                // }\r\n                // if (this.animationState == null || (!this.isMove && this.isOnGround && !this.animation.getAnimationState('char1idle').isPlaying)){\r\n                //     this.animationState = this.animation.play('char1idle');\r\n                // }          \r\n            } else if(this.node.name == \"Player 2\") {\r\n                if(this.isOnGround && !this.isMove && !this.hurt && (!this.animationState || this.animationState.name != \"char2idle\")) {\r\n                    this.animationState = this.animation.play(\"char2idle\");\r\n                } else if(this.isOnGround && this.isMove && (!this.animationState || this.animationState.name != \"char2run\")) {\r\n                    this.animationState = this.animation.play(\"char2run\");\r\n                } else if(!this.isOnGround && (!this.animationState || this.animationState.name != \"char2jump\")) {\r\n                    this.animationState = this.animation.play(\"char2jump\");\r\n                }\r\n            } else if(this.node.name == \"Player 3\") {\r\n                if(this.isOnGround && !this.isMove && !this.hurt && (!this.animationState || this.animationState.name != \"char3idle\")) {\r\n                    this.animationState = this.animation.play(\"char3idle\");\r\n                } else if(this.isOnGround && this.isMove && (!this.animationState || this.animationState.name != \"char3run\")) {\r\n                    this.animationState = this.animation.play(\"char3run\");\r\n                } else if(!this.isOnGround && (!this.animationState || this.animationState.name != \"char3jump\")) {\r\n                    this.animationState = this.animation.play(\"char3jump\");\r\n                }\r\n            }  else if(this.node.name == \"Player 4\") {\r\n                if(this.isOnGround && !this.isMove && !this.hurt && (!this.animationState || this.animationState.name != \"char4idle\")) {\r\n                    this.animationState = this.animation.play(\"char4idle\");\r\n                } else if(this.isOnGround && this.isMove && (!this.animationState || this.animationState.name != \"char4run\")) {\r\n                    this.animationState = this.animation.play(\"char4run\");\r\n                } else if(!this.isOnGround && (!this.animationState || this.animationState.name != \"char4jump\")) {\r\n                    this.animationState = this.animation.play(\"char4jump\");\r\n                }\r\n            }\r\n        }   \r\n    }\r\n\r\n    setPlayerMoveDirection(dir: number) {\r\n        this.moveDirection = dir;\r\n    }\r\n\r\n    setPlayerChangeDirection(dir: number) {\r\n        this.changeDirection = dir;\r\n    }\r\n\r\n    setPlayerJump(val: boolean) {\r\n        this.jump = val;\r\n    }\r\n\r\n    setPlayerShoot(angle) {\r\n        this.angle = angle;\r\n        this.shoot = true;\r\n    }\r\n\r\n    setPlayerBomb(angle) {\r\n        this.angle = angle;\r\n        this.bomb = true;\r\n    }\r\n}\r\n"]}